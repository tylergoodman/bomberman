<!DOCTYPE HTML>
<html>
<head>
    <title>pixi.js example 1</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #000000;
        }
    </style>
    <script src="pixi.js"></script>
    <script src="controls.js" type="text/javascript" ></script>

</head>
<body>
    <script>
    
    // create an new instance of a pixi stage
    var stage = new PIXI.Stage(0x66FF99);
    
    // create a renderer instance
    var renderer = PIXI.autoDetectRenderer(400, 300);
    
    // add the renderer view element to the DOM
    document.body.appendChild(renderer.view);
    
    requestAnimFrame( animate );
    
    // create a texture from an image path
    var texture = PIXI.Texture.fromImage("bomberman.jpg");
    // create a new Sprite using the texture
    var bunny = new PIXI.Sprite(texture);
    
    // center the sprites anchor point
    bunny.anchor.x = 0.5;
    bunny.anchor.y = 0.5;
    
    // move the sprite t the center of the screen
    bunny.position.x = 200;
    bunny.position.y = 150;
    
    stage.addChild(bunny);

    // Sets up the keyboard event listener
    window.onload = function() {
        document.onkeydown = showKey;
    }

    // Event when a key is hit: converts the key to a string
    function showKey(e) {
        var key;
        if (window.event) {
            key = window.event.keyCode;
        } 
        else {
            key = e.keyCode;
        }

        key = String.fromCharCode(key);
        ProcessKey(key);
    }

    // Processes a key press event
    function ProcessKey(key)
    {
        if (key == "A")
        {
            move(bunny, "LEFT");
        }
        else if(key == "D")
        {
            move(bunny, "RIGHT");
        }
        else if(key == "W")
        {
            move(bunny, "UP");
        }
        else if(key == "S")
        {
            move(bunny, "DOWN");
        }
    }
        
    function animate() {
    
        requestAnimFrame( animate );
        
        // render the stage   
        renderer.render(stage);
    }

    </script>

    </body>
</html>
